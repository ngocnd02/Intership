#Ch??ng 1: Gi?i thi?u v? ti?n trình

##1Thu?t ng?. 

####1.1 Process

- Là ti?n trình ???c biên d?ch mã ngu?n ?ang ch?y trên h? th?ng. 

####1.2 PID

- T?t c? các ti?n trình ??u có m?t process id or PID

####1.3 PPID

- M?i ti?n trình có m?t ti?n trình cha (v?i m?t PPID). Ti?n trình con th??ng b?t ??u b?i ti?n trình 

cha, ngo?i tr? ti?n trình g?c (PID 1) có th? không có cha, nh?ng nó là ti?n trình kh?i ??u cho h?

th?ng.

####1.4 Init

- Ti?n trình init luôn luôn có process ID là 1. Ti?n trình init ???c kh?i ??ng b?i chính kernal, nên 

v? m?t k? thu?t nó không có ti?n trình cha. 

####1.5 Kill

- Khi m?t ti?n trình ng?ng ch?y, ti?n trình ?ó s? ch?t, khi b?n mu?n lo?i b? m?t ti?n trình, b?n s?

kill nó. 

- Cú pháp: kill [OPTIONS] PID

####1.6 Deamon

- Các ti?n trình \*\*daemon\*\* là các ti?n trình trong h? th?ng máy tính ch?y ? n?n và không c?n s?

can thi?p c?a ng??i dùng ?? kh?i ??ng ho?c ch?y. Chúng th??ng ???c thi?t k? ?? cung c?p các 

d?ch v?, ch?c n?ng h? th?ng ho?c ti?n ích mà không yêu c?u s? t??ng tác tr?c ti?p t? ng??i 

dùng.

- M?t s? ti?n trình \*\*daemon\*\* có th? là các d?ch v? nh? máy ch? web (ví d?: Apache), máy ch? email 

(ví d?: Postfix), máy ch? c? s? d? li?u (ví d?: MySQL), ho?c các ti?n ích nh? cron (qu?n lý l?ch 

trình) trong h? th?ng Linux.

- Các ti?n trình \*\*daemon\*\* th??ng kh?i ??ng cùng v?i h? th?ng và ti?p t?c ch?y trong su?t th?i gian 

ho?t ??ng c?a h? th?ng ?? cung c?p các d?ch v? ho?c ch?c n?ng liên t?c mà ng??i dùng có th?

truy c?p ho?c s? d?ng thông qua các ?ng d?ng khác.

####1.7 Zombie

\- Khi m?t ti?n trình b? k?t thúc nh?ng v?n hi?n th? trên h? th?ng, thì ti?n trình ?ó ???c g?i là 

\*\*zombie\*\*. B?n không th? kill các ti?n trình zombie vì chúng ?ã b? xóa.

##2-Qu?n lý ti?n trình c? b?n (basic process management)

####2.1 $$ and $PPID

\- M?t s? bi?n môi tr??ng shell ch?a thông tin v? các ti?n trình. Bi?n \*\*$$\*\* s? ch?a ID ti?n trình hi?n 

t?i c?a b?n và $PPID ch?a PID g?c. Trên th?c t? \*\*$$\*\* là tham s? shell ch? không ph?i bi?n, b?n 

không th? gán giá tr? cho nó. 

####2.2 pidof

\- B?n có th? tìm th?y t?t c? id c?a ti?n trình theo tên b?ng l?nh pidof

\- \*L?u ý\*: l?nh này c?n ???c ch?y v?i quy?n root

####2.3 Ti?n trình cha và con

\- Các ti?n trình có m?i quan h? cha-con. M?i ti?n trình ??u có m?t ti?n trình cha. Khi kh?i ??ng 

m?t bash m?i, b?n có th? s? d?ng l?nh echo ?? xác minh r?ng PID t? tr??c ?ó chính là PPID c?a 

shell m?i. Ti?n trình con t? tr??c ?ó gi? ?ây tr? thành ti?n trình cha.

####2.4 fork and exec

Quá trình kh?i ??ng m?t ti?n trình con trong h? th?ng Unix/Linux th??ng di?n ra theo hai b??c chính: 

\*\*fork\*\*và \*\*exec\*\*.

Fork:

\- Tr??c h?t, quá trình cha t?o m?t b?n sao c?a chính nó. ?i?u này ???c g?i là \*\*fork\*\*. Khi fork x?y 

ra, m?t b?n sao chính xác c?a quá trình cha ???c t?o ra, bao g?m toàn b? b? nh? và tr?ng thái 

c?a quá trình cha t?i th?i ?i?m fork.

Exec:

\- Sau khi quá trình con ?ã ???c t?o thông qua \*\*fork\*\*, quá trình con s? d?ng hàm \*\*exec\*\* ?? thay th?

b?n sao v?i m?t ch??ng trình m?i ho?c m?t quá trình con m?c tiêu khác. Hàm exec th?c hi?n 

vi?c n?p m?t ch??ng trình m?i vào không gian b? nh? c?a quá trình con và thay th? mã máy ch?

y?u ?? th?c thi ch??ng trình m?i này.

\```sh

[paul@RHEL4b ~]$ echo $$

4224

[paul@RHEL4b ~]$ bash

[paul@RHEL4b ~]$ echo $$ $PPID

5310 4224

\```

####2.5 exec

\- V?i l?nh exec, b?n có th? th?c thi m?t ti?n trình mà không c?n t?o m?t ti?n trình m?i thông qua 

fork.

####2.6 ps

\- Công c? \*\*ps\*\* trong Linux là m?t công c? m?nh m? ?? hi?n th? thông tin v? các ti?n trình ?ang ch?y 

trên h? th?ng. Nó cung c?p m?t cách ti?p c?n d? dàng ?? xem danh sách các ti?n trình, thông tin 

chi ti?t v? các ti?n trình này, và các tài nguyên h? th?ng mà chúng s? d?ng.

\- L?nh: \*ps fx\*

ps: Là l?nh ?? hi?n th? thông tin v? các ti?n trình.

f: Là m?t tùy ch?n (option) trong ps ?? hi?n th? thông tin d??i d?ng cây (tree) v? m?i 

quan h? cha-con gi?a các ti?n trình. Nó hi?n th? các ti?n trình theo c?u trúc cây, trong ?ó 

các ti?n trình con ???c li?t kê d??i ti?n trình cha c?a chúng.

x: Là tùy ch?n ?? hi?n th? t?t c? các ti?n trình không ch? các ti?n trình c?a ng??i dùng 

hi?n t?i.

\- Ngoài ra l?nh \*ps fax\* c?ng th??ng ???c s? d?ng 

####2. 7 pgrep

\- L?nh pgrep trong Linux ???c s? d?ng ?? tìm ki?m và hi?n th? các Process ID (PID) d?a trên tên 

c?a các ti?n trình.

\*pgrep <tên\_ti?n\_trình>\*

\- T??ng t? nh? l?nh ps -C

\*ps -C <tên\_ti?n\_trình>\*

####2.8 top

\- top là m?t công c? m?nh m? trong h? th?ng Linux ???c s? d?ng ?? hi?n th? thông tin ??ng v?

các ti?n trình ?ang ch?y, tài nguyên h? th?ng, và th?c hi?n theo dõi hi?u su?t h? th?ng tr?c ti?p.

\- Công c? top có th? s?p x?p các ti?n trình theo m?c s? d?ng CPU ho?c các thu?c tính khác. B?n 

c?ng có th? k?t thúc các ti?n trình t? bên trong top.

##3-Signalling process

####3.1 kill

\- Câu l?nh \*\*kill\*\* s? d?ng, ho?c xóa m?t ti?n trình

\*kill [tùy\_ch?n] <PID>\*

####3.2 list signals

\- Các ti?n trình ?ang ch?y có th? nh?n tín hi?u t? nhau ho?c t? ng??i dùng. B?n có th? xem danh 

sách các tín hi?u b?ng cách gõ l?nh \*kill - l\*

####3.3kill -1 (SIGHUP)

\- L?nh \*kill -1\* trên Linux có ý ngh?a g?i tín hi?u \*\*SIGHUP\*\* ??n m?t ti?n trình ho?c m?t nhóm các ti?n trình

Khi b?n s? d?ng \*\*kill -1 <PID>\*\*, nó g?i tín hi?u SIGHUP ??n ti?n trình có ID là \*\*<PID>\*\*,

thông th??ng ?? yêu c?u ti?n trình ?ó ??c l?i c?u hình c?a nó mà không c?n kh?i ??ng l?i.

\- V?i kill -1 1, nó g?i tín hi?u SIGHUP ??n ti?n trình init v?i PID 1, yêu c?u init ??c l?i t?p c?u hình 

c?a mình mà không c?n ph?i kh?i ??ng l?i h? th?ng.

####3.4 kill -15

\- L?nh \*\*kill -15\*\* trên Linux g?i m?t tín hi?u SIGTERM ??n m?t ti?n trình ho?c m?t nhóm ti?n trình.

Khi b?n s? d?ng \*\*kill -15 <PID>\*\*, nó g?i tín hi?u SIGTERM ??n ti?n trình có ID là \*\*<PID>\*\*, 

thông báo cho ti?n trình ?ó là c?n ph?i d?ng l?i (terminate)

-Khi m?t ti?n trình nh?n ???c tín hi?u SIGTERM, nó thông th??ng s? ch?m d?t ho?t ??ng c?a mình m?t cách t? qu?n lý.

Ti?n trình có th? d?n d?p các tài nguyên, l?u tr?ng thái ho?c th?c hi?n các công vi?c c?n thi?t tr??c khi k?t thúc.

\*\*SIGTERM\*\* th??ng ???c s? d?ng trong các tr??ng h?p khi b?n mu?n d?ng m?t ti?n trình m?t cách êm d?u, 

cho phép nó k?t thúc các tác v? ?ang th?c hi?n và thoát ra m?t cách ki?m soát h?n so v?i tín hi?u SIGKILL, 

tín hi?u khác m?nh m? h?n và ngay l?p t?c k?t thúc ti?n trình mà không c?n cho phép ti?n trình k?t thúc các ho?t ??ng ?ang th?c hi?n.

####3.5 kill -9

-L?nh \*\*kill -9\*\* trên Linux g?i m?t tín hi?u SIGKILL ??n m?t ti?n trình ho?c m?t nhóm các ti?n trình. 

Khi b?n s? d?ng \*\*kill -9 <PID>\*\*, nó g?i tín hi?u SIGKILL ??n ti?n trình có ID là \*\*<PID>\*\*, 

bu?c ti?n trình ?ó k?t thúc ngay l?p t?c mà không có c? h?i ?? x? lý ho?c d?n d?p gì tr??c khi k?t thúc.

\- Tín hi?u \*\*SIGKILL\*\* là m?t tín hi?u m?nh m? và th??ng ???c s? d?ng khi c?n bu?c k?t thúc m?t ti?n trình mà 

không c?n ph?i x? lý các tài nguyên ho?c l?u tr?ng thái. Tuy nhiên, ?i?u này c?ng có th? gây ra m?t mát d? li?u 

ho?c tr?ng thái không mong mu?n trong các tình hu?ng không ???c x? lý c?n th?n. 

Do ?ó, th??ng khuy?n khích s? d?ng \*\*SIGTERM\*\* \*(kill -15)\* tr??c khi s? d?ng \*\*SIGKILL\*\* n?u có th?, 

?? cho ti?n trình có c? h?i k?t thúc m?t cách ki?m soát h?n.

####3.6 SIGSTOP  và SIGCONT

\- \*\*SIGSTOP\*\* (tín hi?u s? 19 trên Linux): Khi m?t ti?n trình nh?n ???c tín hi?u này, nó b? t?m d?ng (stopped). 

Ti?n trình t?m d?ng không tiêu t?n CPU và không th?c hi?n b?t k? ho?t ??ng nào. 

Nó v?n n?m trong b? nh? và không th? ti?p t?c ch?y cho ??n khi nh?n ???c tín hi?u SIGCONT.

\- \*\*SIGCONT\*\* (tín hi?u s? 18 trên Linux): Khi m?t ti?n trình b? t?m d?ng (stopped) nh?n ???c tín hi?u này, 

nó s? ti?p t?c ho?t ??ng (continue). Nó cho phép ti?n trình b? t?m d?ng ti?p t?c th?c hi?n công vi?c c?a mình 

t? v? trí n?i nó ?ã b? t?m d?ng.

####3.7 pkill

\- L?nh \*\*pkill\*\* cho phép tìm và k?t thúc các ti?n trình d?a theo tên
